# دليل نظام الترجمة i18n

## نظرة عامة
تم إضافة نظام ترجمة شامل لدعم 5 لغات:
- العربية (ar) - اللغة الافتراضية
- الإنجليزية (en)
- الروسية (ru)
- الفرنسية (fr)
- التركية (tr)

## بنية الملفات

```
public/
├── locales/
│   ├── ar/          # العربية
│   │   ├── common.json
│   │   ├── calculator.json
│   │   ├── results.json
│   │   └── guide.json
│   ├── en/          # الإنجليزية
│   │   ├── common.json
│   │   ├── calculator.json
│   │   ├── results.json
│   │   └── guide.json
│   ├── ru/          # الروسية
│   ├── fr/          # الفرنسية
│   └── tr/          # التركية
└── js/
    └── i18n.js      # نظام الترجمة
```

## كيفية الاستخدام

### 1. الوصول للصفحات بلغات مختلفة
- الصفحة الرئيسية: `http://localhost:3000/`
- الإنجليزية: `http://localhost:3000/en`
- الروسية: `http://localhost:3000/ru`
- الفرنسية: `http://localhost:3000/fr`
- التركية: `http://localhost:3000/tr`

### 2. تغيير اللغة من الواجهة
يوجد منتقي لغة في شريط التنقل يسمح بتغيير اللغة فوراً.

### 3. إضافة ترجمات جديدة

#### في ملفات JSON:
```json
{
  "newKey": "النص الجديد",
  "nested": {
    "key": "نص متداخل"
  }
}
```

#### في HTML:
```html
<span data-i18n="newKey" data-i18n-ns="common">النص الافتراضي</span>
```

#### في JavaScript:
```javascript
const text = window.t('newKey', {ns: 'common'});
```

## أسماء الملفات (Namespaces)

- `common`: النصوص المشتركة (العناوين، الأزرار، إلخ)
- `calculator`: نصوص الحاسبة
- `results`: نصوص النتائج
- `guide`: نصوص دليل الاستخدام

## الميزات

### 1. دعم RTL/LTR
- العربية: RTL
- باقي اللغات: LTR

### 2. التخزين المحلي
- يتم حفظ اللغة المختارة في localStorage
- يتم استرجاعها عند إعادة تحميل الصفحة

### 3. التحديث التلقائي
- تحديث جميع النصوص عند تغيير اللغة
- تحديث اتجاه الصفحة (RTL/LTR)

### 4. الترجمة الديناميكية
- دعم المتغيرات في الترجمات
- مثال: `"welcome": "مرحباً {{name}}"`

## إضافة لغة جديدة

### 1. إنشاء مجلد اللغة
```bash
mkdir public/locales/[language-code]
```

### 2. إنشاء ملفات الترجمة
نسخ الملفات من مجلد `ar` وتعديلها.

### 3. تحديث قائمة اللغات المدعومة
في `public/js/i18n.js`:
```javascript
const supportedLanguages = ['ar', 'en', 'ru', 'fr', 'tr', 'new-lang'];
```

### 4. إضافة مسار الخادم
في `server.js`:
```javascript
supportedLanguages.push('new-lang');
```

### 5. تحديث منتقي اللغة
في `public/index.html`:
```html
<option value="new-lang">اسم اللغة</option>
```

## استكشاف الأخطاء

### 1. عدم ظهور الترجمة
- تأكد من وجود المفتاح في ملف JSON
- تأكد من صحة namespace
- تحقق من console للأخطاء

### 2. مشاكل RTL/LTR
- تأكد من إضافة اللغة لقائمة `rtlLanguages`
- تحقق من تحديث `dir` attribute

### 3. مشاكل التخزين
- امسح localStorage: `localStorage.clear()`
- تحقق من صحة JSON في ملفات الترجمة

## أفضل الممارسات

1. **استخدم مفاتيح وصفية**: `user.profile.name` بدلاً من `text1`
2. **قسم الترجمات**: استخدم namespaces منطقية
3. **اختبر جميع اللغات**: تأكد من عمل كل لغة
4. **احتفظ بنسخ احتياطية**: من ملفات الترجمة
5. **استخدم fallback**: دائماً ضع نص افتراضي في HTML

## الدعم

للمساعدة أو الإبلاغ عن مشاكل، يرجى مراجعة:
- ملفات الترجمة في `public/locales/`
- ملف التكوين `public/js/i18n.js`
- إعدادات الخادم في `server.js`
